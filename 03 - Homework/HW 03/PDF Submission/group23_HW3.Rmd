---
title:    "Homework 3 - Integer Programming"
subtitle: "Adv. Analytics and Metaheuristics"
author:   "Daniel Carpenter and Iker Zarandona"
date:     "March 2022"
fontsize: 12pt
geometry: margin=1in
output:
  pdf_document: 
    toc: yes
    number_sections: yes
    highlight: kate
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

\newpage
# - Problem `1`

## Mathematical Formulation

### Sets
Set Name | Description 
---------|--------------
$GENERATORS$	| Set of generators $i$ that can be used (`A`,`B`,`C`)
$PERIODS$	    | 2 possible periods $p$ (`1`, `2`) in the production day 


### Parameters
Parameter Name | Description 
---------------|--------------
$S_i$      | Fixed cost to start a generator ($i \in GENERATORS$) in the entire day
$F_i$      | Fixed cost to operate a generator ($i \in GENERATORS$) in any period
$C_i$      | Variable cost per megawatt to operator a generator ($i \in GENERATORS$) in any period
$U_i$      | Max. megawatts generated for generator ($i \in GENERATORS$) in any period
$demand_p$ | Total demanded megawatts for period ($p \in PERIODS$)
$M_i$	     | Value to map watts used by each generator ($i \in GENERATORS$)


### Decision Variables
Variable Name | Description 
--------------|--------------
$watts_{i,p}$	| *Integer variable*: Number of watts to produce per generator ($i \in GENERATORS$) per period ($p \in PERIODS$)
$x_{i,p}$	    | *Binary variable*: `1` if a generator ($i \in GENERATORS$) is in period $p$ ($p \in PERIODS$), `0` if not turned on at all
$y_i$	        | *Binary variable*: `1` if a generator ($i \in GENERATORS$) is used, `0` if not turned on at all


### Objective Function
$$
minimize \ cost: \ 
\sum_{i \in GENERATORS} 
\begin{pmatrix} 
  (\sum_{p \in PERIODS}(watts_{i,p}) \times C_i) + (F_i \times \sum_{p \in PERIODS} x_{i,p} ) + (S_i \times y_i)
\end{pmatrix} 
$$


### Constraints

**C1:** For each period, meet the demanded megawatts
$$
requiredWatts: \ \sum_{i \in GENERATORS}(watts_{i,p}) = demand_p, 
\forall \ p \in PERIODS
$$

**C2:** For each generator, don't surpass the allowable megawatts 
$$
upperBound: \ \sum_{p \in PERIODS}(watts_{i,p}) \leq U_i, 
\forall \ i \in GENERATORS
$$

**C3:** For each generator, map decision variables together to account for the fixed costs in a given day $S_i$
$$
mapVars: \ \sum_{p \in PERIODS}(watts_{i,p}) \leq M_i \times y_i,
\forall \ i \in GENERATORS
$$

**C4:** For each generator and period, map decision variables $y$ and $watts$ together to account for the fixed costs in a per period $p$
$$
mapVars2: watts_{i,p} \leq M_i \times x_{i,p}
, \forall \ i \in GENERATORS, \ p \in PERIODS
$$
\newpage

## Code and Output

### Code
![ ]("Images/prob1CodeAndData.png"){ width=100% }

### Output
![ ]("Images/prob1Output.png"){ width=80% }

#### Analysis of the Output
* The minimized cost is $\$46,100$
* Generator $A$, $B$, and $C$ run
* Generator $C$ runs in period $1$. Generator $A$ and $B$ run in period $2$
* Generator $A$ produces $2,100$ megawatts in total
* Generator $B$ produces $1,800$ megawatts in total
* Generator $C$ produces $2,900$ megawatts in total


\newpage
# - Problem `2`

## Mathematical Formulation

### Sets
Set Name | Description 
---------|--------------
$PRODUCTS$ | 5 types of landscaping and construction products (e.g., cement, sand, etc.) labeled product ($p$) $A, B, C, D,\text{ and } E$
$SILOS$    | 8 different silos $s$ that each product must be stored in $(1,2,\dots,8)$


### Parameters
Parameter Name | Description 
---------------|--------------
$cost_{s,p}$   | Cost of storing *one ton* of product $p \in PRODUCTS$ in silo $s \in SILOS$
$supply_p$     | Total supply *in tons* available of product $p \in PRODUCTS$
$capacity_s$   | Total capacity *in tons* of silo $s \in SILOS$. Can store products.
$M_{s}$        | Variable to map *decision variable* $tonsOfProduct_{p,s}$ to $isStored_{p,s}$. Value is slightly more than the capacity of each silo.


### Decision Variables
Variable Name | Description 
--------------|--------------
$tonsOfProduct_{p,s}$ | *Tons* of product $p \in PRODUCTS$ to store in silo $s \in SILOS$
$isStored_{p,s}$      | *Binary variable* indicating if product $p \in PRODUCTS$ is stored in silo $s \in SILOS$




### Objective Function
$$
minimize \ cost: \sum_{p \in PRODUCTS}\sum_{s \in SILOS} tonsOfProduct_{p,s} \times cost_{p,s} 
$$

\newpage

### Constraints

**C1:** For each silo $s$, the *tons* of the supplied product $p$ must be less than or equal to the capacity limit of silo $s$
$$
meetCapacity: \sum_{p \in PRODUCTS} tonsOfProduct_{p,s} \leq capacity_s
, \ \forall \ s \in SILOS
$$

**C2:** For each product $p$, must use all of the total product that is available
$$
useAllProduct: \sum_{s \in SILOS} tonsOfProduct_{p,s} = supply_p
, \ \forall \ p \in PRODUCTS
$$

**C3:** For each silo $s$, can only store one type of product $p$ in each silo
$$
\sum_{p \in PRODUCTS}tonsOfProduct_{p,s} \leq M_s \times \sum_{p \in PRODUCTS}isStored_{p,s}
, \ \forall \ s \in SILOS
$$


\newpage

## Code and Output

### Code
<!-- ![ ]("Images/prob2CodeAndData.png"){ width=90% } -->

### Output
<!-- ![ ]("Images/prob2Output.png") -->

